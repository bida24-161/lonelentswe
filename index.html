<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LONE's MINI BRANDHOUSE</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="Image/favicon.ico">
</head>
<body>
    <section id="header">
        <div class="header-logo">
            <a href="index.html"><img src="./Image/logo.png" alt="LONE's MINI BRANDHOUSE Logo"></a>
        </div>

        <div>
            <ul id="navbar">
                <li><a class="active" href="index.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="about.html">About</a></li>
                <li><a href="contact.html">Contact</a></li>
                <li><a href="faq.html">FAQ</a></li>
                <li id="lg-bag"><a href="cart.html"><i class="fa-solid fa-bag-shopping"></i><span class="cart-count" style="display:none;"></span></a></li>
            </ul>
        </div>
        <div id="mobile">
            <a href="cart.html"><i class="fa-solid fa-bag-shopping"></i></a>
            <i id="bar" class="fa-solid fa-bars"></i>
            <i id="close" class="fa-solid fa-times"></i>
        </div>
    </section>

    <section id="hero">
        <h4>Student Exclusive!</h4>
        <h2>Unbeatable Campus Deals</h2>
        <h1>On All Your University Essentials!</h1>
        <p>Unlock massive savings with your student ID</p>
        <button onclick="window.location.href='shop.html'">Shop Smart Now!</button>
    </section>

    <section id="feature" class="section-p1">
        <div class="fe-box">
            <img src="Image/features/f1.png" alt="Free Shipping">
            <h6>Free Shipping</h6>
        </div>
        <div class="fe-box">
            <img src="Image/features/f2.png" alt="Online Order">
            <h6>Online Order</h6>
        </div>
        <div class="fe-box">
            <img src="Image/features/f3.png" alt="Save Money">
            <h6>Save Money</h6>
        </div>
        <div class="fe-box">
            <img src="Image/features/f4.png" alt="Promotions">
            <h6>Promotions</h6>
        </div>
        <div class="fe-box">
            <img src="Image/features/f5.png" alt="Happy Sell">
            <h6>Happy Sell</h6>
        </div>
        <div class="fe-box">
            <img src="Image/features/f6.png" alt="24/7 Support">
            <h6>24/7 Support</h6>
        </div>
    </section>

    <section id="product1" class="section-p1">
        <h2>New Arrivals</h2>
        <p>New Modern Designs</p>
        <div class="pro-Container" id="newArrivalsContainer">
            </div>
    </section>

    <footer class="section-p1">
        <div class="col">
            <img class="logo" src="Image/logo.png" alt="LONE's MINI BRANDHOUSE Logo">
            <h4>Contact</h4>
            <p><strong>Address :</strong>1084 Mogoma Rd, Gaborone</p>
            <p><strong>Phone :</strong>+267 74697684</p>
            <p><strong>Hours:</strong>10:00 - 18:00. Mon - Sat</p>
            <div class="follow">
                <div>Follow us</div>
                <div class="icon">
                    <i class="fa-brands fa-facebook-square"></i>
                    <i class="fa-brands fa-youtube"></i>
                    <i class="fa-brands fa-telegram"></i>
                    <i class="fa-brands fa-instagram"></i>
                    <i class="fa-brands fa-twitter"></i>
                </div>
            </div>
        </div>
        <div class="col">
            <h4>About</h4>
            <a href="about.html">About us</a>
            <a href="#" id="deliveryInfoLink">Delivery Information</a>
            <a href="#" id="privacyPolicyLink">Privacy Policy</a>
            <a href="#" id="termsConditionsLink">Terms & Conditions</a>
            <a href="#" id="contactUsLink">Contact Us</a>
        </div>
        <div class="col">
            <h4>My Account</h4>
            <a href="cart.html">View Cart</a>
            <a href="waitlist.html">My Waitlist</a>
            <a href="trackorder.html">Track My Order</a>
            <a href="help.html">Help</a>
        </div>
    </footer>

    <div id="modal-container" class="modal-container">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <h2 id="modal-title"></h2>
            <div id="modal-body"></div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // This is a sample array of products. In a real application,
            // this data would likely come from an API call or a JSON file.
            const newArrivalProducts = [
                {
                    id: "n1",
                    name: "Light Blue Men's Casual Shirt",
                    price: 25,
                    image: "Image/products/n1.jpg",
                    stars: 5
                },
                {
                    id: "n2",
                    name: "Blue Stripped Men's Casual Shirt",
                    price: 25,
                    image: "Image/products/n2.jpg",
                    stars: 5
                },
                {
                    id: "new-3",
                    name: "Black North Face Puffer Jacket",
                    price: 80,
                    image: "https://1to1.clothing/cdn/shop/files/DE17961E-8BF9-432A-AE2B-F3B269E2BEC1_400x.png?v=1723538305",
                    stars: 5
                },
                {
                    id: "new-4",
                    name: "Saints Club Skull Cap",
                    price: 10,
                    image: "https://1to1.clothing/cdn/shop/files/1D4E9BFC-D908-406A-B159-4B35484F988F_400x.png?v=1738746021",
                    stars: 5
                },
                {
                    id: "new-5",
                    name: "Chrome Hearts Long Sleeve",
                    price: 25,
                    image: "https://1to1.clothing/cdn/shop/files/IMG_1185_400x.jpg?v=1715627016",
                    stars: 5
                },
                {
                    id: "new-6",
                    name: "Black Denim Jorts",
                    price: 30,
                    image: "https://1to1.clothing/cdn/shop/files/FullSizeRender_879a33c9-01c2-4b3c-b977-c61cbd8cd1f7_400x.jpg?v=1738092962",
                    stars: 5
                },
                {
                    id: "new-7",
                    name: "Black Baggy Jeans",
                    price: 40,
                    image: "https://1to1.clothing/cdn/shop/files/1to1_15_7492f74b-534f-47ed-9d84-589d7b2e9b8e_400x.png?v=1738139906",
                    stars: 5
                },
                {
                    id: "new-8",
                    name: "Black Supreme Air force 1s",
                    price: 35,
                    image: "https://1to1.clothing/cdn/shop/files/1to1_13_400x.png?v=1738138875",
                    stars: 5
                }
            ];

            const newArrivalsContainer = document.getElementById('newArrivalsContainer');

            function renderProducts(products, container) {
                container.innerHTML = ''; // Clear existing products
                products.forEach(product => {
                    const productElement = document.createElement('div');
                    productElement.classList.add('pro');
                    productElement.innerHTML = `
                        <img src="${product.image}" alt="${product.name}">
                        <div class="des">
                            <h5>${product.name}</h5>
                            <div class="star">
                                ${Array(product.stars).fill('<i class="fas fa-star"></i>').join('')}
                            </div>
                            <h4>$${product.price.toFixed(2)}</h4>
                        </div>
                        <a href="#" class="add-to-cart"
                           data-product-id="${product.id}"
                           data-product-name="${product.name}"
                           data-product-price="${product.price}">
                           <i class="fa-solid fa-cart-shopping buy-icon"></i>
                        </a>
                    `;
                    container.appendChild(productElement);
                });
            }

            // Render the new arrivals when the page loads
            renderProducts(newArrivalsProducts, newArrivalsContainer);

            // Re-attach event listeners for "Add to Cart" buttons after products are rendered.
            // This is crucial because dynamic content needs event listeners attached AFTER it exists in the DOM.
            // Assuming your script.js has a global handler for '.add-to-cart' or you might need to adapt.
            function attachAddToCartListeners() {
                document.querySelectorAll('.add-to-cart').forEach(button => {
                    button.addEventListener('click', (event) => {
                        event.preventDefault(); // Prevent default link behavior
                        const productId = button.dataset.productId;
                        const productName = button.dataset.productName;
                        const productPrice = parseFloat(button.dataset.productPrice);

                        let cartItems = JSON.parse(localStorage.getItem('cartItems')) || [];

                        const existingItemIndex = cartItems.findIndex(item => item.id === productId);

                        if (existingItemIndex > -1) {
                            // If item already in cart, increment quantity
                            cartItems[existingItemIndex].quantity += 1;
                        } else {
                            // If item not in cart, add new
                            cartItems.push({
                                id: productId,
                                name: productName,
                                price: productPrice,
                                quantity: 1,
                                image: button.querySelector('img') ? button.closest('.pro').querySelector('img').src : '' // Get image if available
                            });
                        }

                        localStorage.setItem('cartItems', JSON.stringify(cartItems));
                        updateCartCount(); // Call the function from script.js to update the header cart count
                        
                        // Optional: Show a confirmation message (e.g., using your modal)
                        const modalContainer = document.getElementById('modal-container');
                        const modalTitle = document.getElementById('modal-title');
                        const modalBody = document.getElementById('modal-body');
                        
                        if (modalContainer && modalTitle && modalBody) {
                             modalTitle.textContent = 'Item Added to Cart!';
                             modalBody.innerHTML = `<p>${productName} has been added to your cart.</p><p>Total items in cart: ${cartItems.reduce((sum, item) => sum + item.quantity, 0)}</p>`;
                             modalContainer.style.display = 'flex';
                        } else {
                            alert(`${productName} added to cart!`);
                        }
                    });
                });
            }

            // Call the function to attach listeners after initial render
            attachAddToCartListeners();

            // Re-initialize any components that might rely on the DOM being fully loaded
            // (e.g., mobile menu toggling, if not already handled by a DOMContentLoaded listener in script.js)
            const bar = document.getElementById('bar');
            const close = document.getElementById('close');
            const nav = document.getElementById('navbar');

            if (bar) {
                bar.addEventListener('click', () => {
                    nav.classList.add('active');
                });
            }

            if (close) {
                close.addEventListener('click', () => {
                    nav.classList.remove('active');
                });
            }

            // Close modal button
            const closeButton = document.querySelector('.modal-content .close-button');
            const modalContainer = document.getElementById('modal-container');
            if (closeButton && modalContainer) {
                closeButton.addEventListener('click', () => {
                    modalContainer.style.display = 'none';
                });
                modalContainer.addEventListener('click', (e) => {
                    if (e.target === modalContainer) {
                        modalContainer.style.display = 'none';
                    }
                });
            }
            
            // Initial cart count update
            updateCartCount();

        });
    </script>
</body>
</html>
